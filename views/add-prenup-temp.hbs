{{>navbar}}
<script>
  function display_div_bride (status) {
    
    if(status === "bride_non_member") {
      document.getElementById("bride_member_div").style.display = "none"
      document.getElementById("bride_member").checked = false
      document.getElementById("bride_member").removeAttribute("disabled")
      document.getElementById("bride_non_member").setAttribute("disabled", "disabled")
      $("#prenup_form").attr('action', '/create_prenup')
      
    }
    else {
      document.getElementById("bride_non_member_div").style.display = "none"
      document.getElementById("bride_non_member").checked = false
      document.getElementById("bride_non_member").removeAttribute("disabled")
      document.getElementById("bride_member").setAttribute("disabled", "disabled")
      $("#prenup_form").attr('action', '/create_prenup_member')
    }
    document.getElementById(status + "_div").style.display = "block"
  }
  function display_div_groom (status) {
    if(status === "groom_non_member") {
      document.getElementById("groom_member_div").style.display = "none"
      document.getElementById("groom_member").checked = false
      document.getElementById("groom_member").removeAttribute("disabled")
      document.getElementById("groom_non_member").setAttribute("disabled", "disabled")
      $("#prenup_form").attr('action', '/create_prenup')
    }
    else {
      document.getElementById("groom_non_member_div").style.display = "none"
      document.getElementById("groom_non_member").checked = false
      document.getElementById("groom_non_member").removeAttribute("disabled")
      document.getElementById("groom_member").setAttribute("disabled", "disabled")
      $("#prenup_form").attr('action', '/create_prenup_member')
    }
    document.getElementById(status + "_div").style.display = "block"
  }
  function checkMemberBoxesAndDate () {
    /*
      Checks if checkbox bride_non_member is checked by user AND 
      checkbox groom_non_member is NOT checked, then change the 
      'action' of the form to '/addPrenupBrideNonMember'
      ELSE: change the change the 
      'action' of the form to '/addPrenupGroomNonMember'
    */
    if ($('#bride_non_member').is(':checked') && $('#groom_non_member').is(':checked') !== true) {
      $('#prenup_form').attr('action', '/addPrenupBrideNonMember')
    
    } else if ($('#bride_non_member').is(':checked') !== true && $('#groom_non_member').is(':checked')) {
      $('#prenup_form').attr('action', '/addPrenupGroomNonMember')
    }

    // check if current date is empty
    if (!$('#current_date').val()) {
      $('#current_date').val(new Date().toISOString().slice(0,10))
    }
  }
</script>

<form id="prenup_form" action="/create_prenup_member" method="POST" class="container"> 
  <div class="container" style="padding-left: 20%; padding-right: 20%;">
    <h1 class="my-3">Add Prenup Form</h1>
    <hr>
    <div class="row">
      <div class="col">
        <legend>Bride</legend>
        <hr>
        <input type="checkbox" id="bride_non_member" onclick="display_div_bride('bride_non_member')"> Non-member
        <input class="mb-3" type="checkbox" id="bride_member" onclick="display_div_bride('bride_member')" checked disabled> Member
        <div id="bride_member_div" style="display:block">
          <label>Select Bride</label>
          <select name="input_bride_member" id="input_bride_member" class="form-select">
            {{!-- checks if the names length is only 1 (i.e. brideNames.length == 1), function is in helpers/hbsHelper.js--}}
            {{#if (isLengthOne brideNames.length)}}
              {{> oneDropdownBride brideNames=brideNames}}
            {{else}}
              {{> dropdownBride brideNames=brideNames}}
            {{/if}}
          </select>
        </div>
        <fieldset class="form-group" id="bride_non_member_div" style="display:none">
          <div class="div">
            <div class="row">
              <div class="col-12">
                <label for="bride_first_name">First Name</label>
                <input type="text" id="bride_first_name" name="bride_first_name" class="form-control">
              </div>
              <div class="col-12">
                <label for="bride_mid_name">Middle Name</label>
                <input type="text" id="bride_mid_name" name="bride_mid_name" class="form-control">
              </div>
              <div class="col-12">
                <label for="bride_last_name">Last Name</label>
                <input type="text" id="bride_last_name" name="bride_last_name"class="form-control">
              </div>
            </div>
          </div>
        </fieldset>
        <p id="bride_info_error" class="error_codes"> </p>
      </div>
      <div class="col">
        <legend>Groom</legend>
        <hr>
        <input type="checkbox" id="groom_non_member" onclick="display_div_groom('groom_non_member')"> Non-member
        <input class="mb-3" type="checkbox" id="groom_member" onclick="display_div_groom('groom_member')" checked disabled> Member

        <div id="groom_member_div" style="display:block">
          <label>Select Groom</label>
          <select name="input_groom_member" id="input_groom_member" class="form-select">
            {{!-- checks if the names length is only 1 (i.e. groomNames.length == 1), function is in helpers/hbsHelper.js--}}
            {{#if (isLengthOne groomNames.length)}}
              {{> oneDropdownGroom groomNames=groomNames}}
            {{else}}
              {{> dropdownGroom groomNames=groomNames}}
            {{/if}}
          </select>
        </div>
        
        <fieldset class="form-group" id="groom_non_member_div" style="display:none">
          <div class="div">
            <div class="row">
              <div class="col-12">
                <label for="groom_first_name">First Name</label>
                <input type="text" id="groom_first_name" name="groom_first_name" class="form-control">
              </div>
              <div class="col-12">
                <label for="groom_mid_name">Middle Name</label>
                <input type="text" id="groom_mid_name" name="groom_mid_name" class="form-control">
              </div>
              <div class="col-12">
                <label for="groom_last_name">Last Name</label>
                <input type="text" id="groom_last_name" name="groom_last_name"class="form-control">
              </div>
            </div>
          </div>
        </fieldset>
        <p id="groom_info_error" class="error_codes"> </p>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="current_date">Current Date</label>
        <input type="date" id="current_date" name="current_date" class="form-control">
        <p id="current_date_error" class="error_codes"> </p>
      </div>
      <div class="col">
        <label for="wedding_date">Planned Wedding Date</label>
        <input type="date" id="wedding_date" name="wedding_date" class="form-control">
        <p id="wedding_date_error" class="error_codes"> </p>
      </div>
    </div>
    <button id="create-prenup" type="button" class="btn btn-primary mt-3" onclick="checkMemberBoxesAndDate()">Submit</button>
  </div>
</form>